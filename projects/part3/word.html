<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ink Character · 战</title>

  <style>
    :root{
      --paper:#f7f2e7;
      --paper2:#efe6d6;
      --ink:#0f0f10;
      --muted: rgba(20,20,20,.55);
      --card: rgba(255,255,255,.55);
      --stroke: rgba(0,0,0,.10);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial,
                   "PingFang SC","Hiragino Sans GB","Noto Sans CJK SC","Microsoft YaHei";
      /* rice paper texture */
      background:
        radial-gradient(1200px 900px at 20% 20%, rgba(90,70,40,.10), transparent 62%),
        radial-gradient(900px 700px at 78% 76%, rgba(30,60,90,.08), transparent 60%),
        linear-gradient(0deg, rgba(0,0,0,.03), transparent 22%, rgba(0,0,0,.02) 55%, transparent 85%),
        repeating-linear-gradient(90deg, rgba(40,30,15,.020) 0 1px, transparent 1px 7px),
        repeating-linear-gradient(0deg, rgba(40,30,15,.014) 0 1px, transparent 1px 9px),
        linear-gradient(180deg, var(--paper), var(--paper2));
    }

    .stage{
      width:min(1100px, 92vw);
      height:min(720px, 90vh);
      position:relative;
      border-radius:32px;
      overflow:hidden;
      box-shadow: 0 28px 70px rgba(0,0,0,.18);
      background: rgba(255,255,255,.28);
      backdrop-filter: blur(1px);
    }

    /* paper vignette + light stains */
    .stage::before{
      content:"";
      position:absolute;
      inset:-50px;
      background:
        radial-gradient(closest-side at 30% 20%, rgba(255,255,255,.70), transparent 62%),
        radial-gradient(closest-side at 70% 80%, rgba(255,255,255,.55), transparent 65%),
        radial-gradient(closest-side at 50% 50%, transparent 68%, rgba(0,0,0,.10) 100%);
      pointer-events:none;
      mix-blend-mode:multiply;
      opacity:.78;
    }

    /* small museum-like caption (very light) */
    .topline{
      position:absolute;
      top:18px; left:22px; right:22px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      color:var(--muted);
      letter-spacing:.12em;
      font-size:12px;
      text-transform: uppercase;
      user-select:none;
      z-index:3;
    }
    .topline b{
      color:rgba(0,0,0,.68);
      letter-spacing:.10em;
      font-weight:650;
    }

    /* central character */
    .center{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      z-index:1;
    }

    svg{
      width:min(760px, 82vw);
      height:auto;
      max-height: 86vh;
    }

    .calligraphy{
      /* prefer clerical/brushy fonts; fallback */
      font-family: "LiSu","STLiti","KaiTi","STKaiti","FangSong","SimSun",serif;
      font-size: 520px;
      font-weight: 400;
      letter-spacing: 0;
    }

    /* base ink */
    .ink-base{
      fill: rgba(12,12,12,.92);
      filter: drop-shadow(0 18px 26px rgba(0,0,0,.22));
      user-select:none;
    }

    /* overlay group toggled on hover */
    .layer{
      opacity:0;
      transition: opacity .14s ease;
      user-select:none;
    }
    .layer text{
      transform-origin: var(--ox, 500px) var(--oy, 350px);
      transition: transform .20s ease, opacity .20s ease;
      opacity: .98;
    }
    .layer.on{ opacity: 1; }
    .layer.on text{ transform: scale(1.05); }

    /* floating callout (appears around / near cursor) */
    .callout{
      position:absolute;
      min-width: 260px;
      max-width: 360px;
      padding: 14px 14px 12px;
      border-radius: 18px;
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: 0 18px 40px rgba(0,0,0,.16);
      backdrop-filter: blur(6px);
      z-index:5;
      pointer-events:none;

      opacity:0;
      transform: translateY(8px);
      transition: opacity .14s ease, transform .14s ease;
    }
    .callout.on{
      opacity:1;
      transform: translateY(0);
    }

    .callout .row{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .callout .cn{
      font-size: 42px;
      font-weight: 900;
      line-height: 1;
    }
    .callout .meta{
      text-align:right;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.06em;
      text-transform: uppercase;
      line-height:1.2;
    }
    .callout .desc{
      font-size: 13.5px;
      line-height: 1.75;
      color: rgba(0,0,0,.78);
    }

    /* faint “ghost labels” around the canvas (optional, artistic) */
    .ghost{
      position:absolute;
      z-index:2;
      color: rgba(0,0,0,.28);
      font-size: 12px;
      letter-spacing:.10em;
      text-transform: uppercase;
      user-select:none;
      pointer-events:none;
    }
    .ghost span[lang="zh"]{
      font-size: 18px;
      letter-spacing: 0;
      margin-left: 6px;
      color: rgba(0,0,0,.34);
      font-family: "LiSu","STLiti","KaiTi","STKaiti","FangSong","SimSun",serif;
    }
    .g1{ top:88px; right:36px; transform: rotate(1deg); }
    .g2{ bottom:88px; right:44px; transform: rotate(-1deg); }
    .g3{ top:132px; left:42px; transform: rotate(-1deg); }
    .g4{ bottom:110px; left:50px; transform: rotate(1deg); }

    @media (max-width: 720px){
      .callout{ min-width: 220px; max-width: 86vw; }
      svg{ width:min(640px, 92vw); }
      .calligraphy{ font-size: 440px; }
    }
  </style>
</head>

<body>
  <div class="stage" id="stage">
    <div class="topline">
      <div><b>Ink Study</b> · interactive component reading</div>
      <div>Hover the character · 战</div>
    </div>

    <div class="ghost g3">left-top <span lang="zh">卜/⺊</span></div>
    <div class="ghost g4">left-bottom <span lang="zh">口</span></div>
    <div class="ghost g1">right <span lang="zh">戈</span></div>
    <div class="ghost g2">whole <span lang="zh">战</span></div>

    <div class="center">
      <svg id="svg" viewBox="0 0 1000 700" role="img" aria-label="Interactive Chinese character: 战">
        <defs>
          <!-- Ink-wash filter (gives watery edge + organic noise) -->
          <filter id="inkWash" x="-20%" y="-20%" width="140%" height="140%">
            <feTurbulence type="fractalNoise" baseFrequency="0.012" numOctaves="2" seed="7" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="10" xChannelSelector="R" yChannelSelector="G"/>
            <feGaussianBlur stdDeviation="0.6" />
          </filter>

          <!-- soft gradient “ink” fills -->
          <radialGradient id="washRed" cx="40%" cy="35%" r="70%">
            <stop offset="0%" stop-color="rgba(160,20,20,.95)"/>
            <stop offset="55%" stop-color="rgba(60,0,0,.70)"/>
            <stop offset="100%" stop-color="rgba(10,10,10,.25)"/>
          </radialGradient>

          <radialGradient id="washIndigo" cx="55%" cy="40%" r="80%">
            <stop offset="0%" stop-color="rgba(25,70,140,.92)"/>
            <stop offset="60%" stop-color="rgba(10,20,40,.55)"/>
            <stop offset="100%" stop-color="rgba(10,10,10,.20)"/>
          </radialGradient>

          <!-- Organic clip shapes (NOT rectangles) -->
          <!-- These are stylized “ink clouds” over approximate regions -->
          <clipPath id="clip-bu">
            <path d="M235,150
                     C280,95 365,85 420,120
                     C450,92 520,98 545,150
                     C595,180 585,255 535,275
                     C520,335 440,350 395,320
                     C330,345 255,300 245,245
                     C210,220 205,175 235,150Z"/>
          </clipPath>

          <clipPath id="clip-kou">
            <path d="M245,385
                     C285,340 365,335 415,365
                     C455,340 525,360 540,410
                     C595,450 575,545 515,560
                     C495,625 415,635 375,600
                     C315,625 250,590 245,530
                     C210,500 205,420 245,385Z"/>
          </clipPath>

          <clipPath id="clip-ge">
            <path d="M520,165
                     C595,125 720,145 770,215
                     C835,255 835,355 790,395
                     C830,460 805,575 720,595
                     C665,640 560,620 535,545
                     C485,520 485,210 520,165Z"/>
          </clipPath>
        </defs>

        <!-- Base character -->
        <text x="500" y="560" text-anchor="middle" class="calligraphy ink-base">战</text>

        <!-- Overlay layers (each clipped + gradient + ink wash filter) -->
        <g id="layer-bu" class="layer" clip-path="url(#clip-bu)">
          <text x="500" y="560" text-anchor="middle" class="calligraphy"
                style="--ox: 360px; --oy: 230px; fill:url(#washRed); filter:url(#inkWash);">战</text>
        </g>

        <g id="layer-kou" class="layer" clip-path="url(#clip-kou)">
          <text x="500" y="560" text-anchor="middle" class="calligraphy"
                style="--ox: 360px; --oy: 520px; fill:url(#washIndigo); filter:url(#inkWash);">战</text>
        </g>

        <g id="layer-ge" class="layer" clip-path="url(#clip-ge)">
          <text x="500" y="560" text-anchor="middle" class="calligraphy"
                style="--ox: 690px; --oy: 410px; fill:url(#washRed); filter:url(#inkWash);">战</text>
        </g>
      </svg>
    </div>

    <!-- floating explanation -->
    <div class="callout" id="callout" aria-live="polite">
      <div class="row">
        <div class="cn" id="cn">战</div>
        <div class="meta" id="meta">hover to explore</div>
      </div>
      <div class="desc" id="desc">
        Move across the character to reveal components. Chinese is shown only for the character/parts.
      </div>
    </div>
  </div>

  <script>
    const stage = document.getElementById("stage");
    const svg = document.getElementById("svg");

    const layer = {
      bu: document.getElementById("layer-bu"),
      kou: document.getElementById("layer-kou"),
      ge: document.getElementById("layer-ge"),
    };

    const callout = document.getElementById("callout");
    const cn = document.getElementById("cn");
    const meta = document.getElementById("meta");
    const desc = document.getElementById("desc");

    const DATA = {
      idle: {
        cn: "战",
        meta: "overview",
        desc:
          "This is a minimal ink-style reading of 战. " +
          "Hover different areas to reveal components: left 占 (卜/⺊ + 口) and right 戈. " +
          "The active part shifts into an ink-wash gradient instead of being boxed."
      },
      bu: {
        cn: "卜",
        meta: "left-top component (within 占)",
        desc:
          "卜/⺊ appears historically in contexts related to divination or indication. " +
          "Here it stands for the left-top structural part of 战 (as part of 占)."
      },
      kou: {
        cn: "口",
        meta: "left-bottom component (within 占)",
        desc:
          "口 often relates to mouth/speech or an enclosure-like form. " +
          "Here it stands for the left-bottom structural part of 战 (as part of 占)."
      },
      ge: {
        cn: "戈",
        meta: "right component (weapon / conflict cue)",
        desc:
          "戈 is a weapon component and commonly signals meanings tied to conflict or force. " +
          "In 战, it forms the right-side structure and acts as a strong semantic clue."
      }
    };

    function clearLayers(){
      Object.values(layer).forEach(g => g.classList.remove("on"));
    }

    function setState(key){
      const d = DATA[key] || DATA.idle;
      cn.textContent = d.cn;
      meta.textContent = d.meta;
      desc.textContent = d.desc;

      if(key === "idle"){
        callout.classList.remove("on");
      }else{
        callout.classList.add("on");
      }
    }

    // Map cursor position to “region”
    function getSvgPercent(evt){
      const r = svg.getBoundingClientRect();
      const x = (evt.clientX - r.left) / r.width;
      const y = (evt.clientY - r.top) / r.height;
      return { x: Math.min(Math.max(x,0),1), y: Math.min(Math.max(y,0),1), rect:r };
    }

    function regionFromPercent(p){
      // Only react when roughly over the glyph area
      const inside = (p.x > 0.18 && p.x < 0.84 && p.y > 0.12 && p.y < 0.92);
      if(!inside) return "idle";

      // coarse mapping (feel free to tune)
      if(p.x < 0.49){
        return (p.y < 0.52) ? "bu" : "kou";
      }
      return "ge";
    }

    // Callout positioning: floats “around” the character, biased away from cursor
    function positionCallout(evt){
      const s = stage.getBoundingClientRect();
      const pad = 16;

      // offset so it doesn't cover the hovered region
      const offsetX = (evt.clientX < s.left + s.width/2) ? 22 : -22;
      const offsetY = (evt.clientY < s.top + s.height/2) ? 18 : -18;

      // base position near cursor
      let x = evt.clientX - s.left + offsetX;
      let y = evt.clientY - s.top + offsetY;

      // clamp within stage
      const w = callout.offsetWidth || 320;
      const h = callout.offsetHeight || 160;

      x = Math.max(pad, Math.min(x, s.width - w - pad));
      y = Math.max(pad + 42, Math.min(y, s.height - h - pad)); // +42 avoids top caption

      callout.style.left = `${x}px`;
      callout.style.top  = `${y}px`;
    }

    let last = "idle";

    svg.addEventListener("pointermove", (evt) => {
      const p = getSvgPercent(evt);
      const key = regionFromPercent(p);

      positionCallout(evt);

      if(key === last) return;

      clearLayers();
      if(key !== "idle"){
        layer[key].classList.add("on");
        setState(key);
      }else{
        setState("idle");
      }

      last = key;
    });

    svg.addEventListener("pointerleave", () => {
      clearLayers();
      setState("idle");
      last = "idle";
    });

    // initial
    setState("idle");
  </script>
</body>
</html>