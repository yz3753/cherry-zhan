<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chinese Character Explorer · 战</title>
  <style>
    :root{
      --bg:#0b0f14;
      --stroke:rgba(255,255,255,.14);
      --muted:#9aa7bd;
      --text:#e9eef7;
      --accent:rgba(120,200,255,.22);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:
        radial-gradient(1200px 700px at 50% 35%, rgba(90,120,255,.12), transparent 55%),
        radial-gradient(900px 600px at 30% 70%, rgba(120,200,255,.10), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "PingFang SC",
                   "Hiragino Sans GB", "Noto Sans CJK SC", "Noto Sans SC", "Microsoft YaHei", Arial;
    }
    .wrap{
      width:min(1100px, 92vw);
      display:grid;
      grid-template-columns: 1.25fr .9fr;
      gap:18px;
      align-items:stretch;
    }
    .stage, .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--stroke);
      border-radius:18px;
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      overflow:hidden;
    }
    .stage{
      position:relative;
      min-height:520px;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .hint{
      position:absolute;
      top:14px; left:14px; right:14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.2px;
    }
    .hint code{
      padding:.15rem .45rem;
      border:1px solid var(--stroke);
      border-radius:999px;
      background:rgba(0,0,0,.18);
      color:rgba(255,255,255,.8);
    }

    svg{ width:100%; height:100%; max-height:620px; }

    .glyph{
      font-size: 360px;
      font-weight: 800;
      fill: rgba(255,255,255,.92);
      paint-order: stroke;
      stroke: rgba(255,255,255,.08);
      stroke-width: 6px;
      filter: drop-shadow(0 18px 25px rgba(0,0,0,.45));
      user-select:none;
    }
    .overlay{
      fill: var(--accent);
      opacity: 0;
      transition: opacity .12s ease;
    }
    .overlay.on{ opacity: 1; }

    .panel{
      padding:18px 18px 16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .title{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      padding-bottom:10px;
      border-bottom:1px solid var(--stroke);
    }
    .title h1{
      margin:0;
      font-size:18px;
      letter-spacing:.3px;
    }
    .badge{
      font-size:12px;
      color:rgba(255,255,255,.8);
      border:1px solid var(--stroke);
      background:rgba(0,0,0,.18);
      padding:.2rem .55rem;
      border-radius:999px;
      white-space:nowrap;
    }

    .card{
      border:1px solid var(--stroke);
      border-radius:14px;
      background: rgba(0,0,0,.18);
      padding:14px;
    }
    .big{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .char{
      font-size:44px;
      font-weight:800;
      line-height:1;
      letter-spacing:.5px;
    }
    .meta{
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
      text-align:right;
    }
    .desc{
      margin-top:10px;
      color:rgba(255,255,255,.86);
      line-height:1.7;
      font-size:14px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .kv{
      display:flex;
      justify-content:space-between;
      gap:10px;
      color:rgba(255,255,255,.85);
      font-size:13px;
      padding:10px 12px;
      border:1px solid var(--stroke);
      border-radius:12px;
      background:rgba(255,255,255,.03);
    }
    .kv span:first-child{ color:var(--muted); }
    .footer{
      margin-top:auto;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding-top:10px;
      border-top:1px solid var(--stroke);
    }

    @media (max-width: 880px){
      .wrap{ grid-template-columns: 1fr; }
      .stage{ min-height:460px; }
      .glyph{ font-size: 320px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="stage">
      <div class="hint">
        <div>Move over the character: <code>left-top</code> / <code>left-bottom</code> / <code>right</code></div>
        <div id="pos">x: --% · y: --%</div>
      </div>

      <svg id="svg" viewBox="0 0 1000 700" role="img" aria-label="Interactive Chinese character: 战">
        <!-- Main character -->
        <text x="500" y="520" text-anchor="middle" class="glyph">战</text>

        <!-- Highlight zones (coarse, adjustable) -->
        <rect id="hl-bu" class="overlay" x="260" y="130" width="230" height="230" rx="18"></rect>
        <rect id="hl-kou" class="overlay" x="260" y="360" width="230" height="230" rx="18"></rect>
        <rect id="hl-ge" class="overlay" x="490" y="150" width="300" height="440" rx="18"></rect>
      </svg>
    </div>

    <aside class="panel">
      <div class="title">
        <h1>Chinese Character Explorer</h1>
        <div class="badge">Current character: 战</div>
      </div>

      <div class="card">
        <div class="big">
          <div class="char" id="partChar">战</div>
          <div class="meta" id="partMeta">Hover the large character<br/>to reveal components</div>
        </div>
        <div class="desc" id="partDesc">
          This page demonstrates a simple hover-based breakdown of the character <span lang="zh">战</span>.
          We use three coarse zones to introduce key components:
          left-top (<span lang="zh">卜/⺊</span>), left-bottom (<span lang="zh">口</span>), and right (<span lang="zh">戈</span>).
        </div>
      </div>

      <div class="row">
        <div class="kv"><span>Active zone</span><span id="partName">—</span></div>
        <div class="kv"><span>Interaction</span><span id="partHint">Move your cursor to explore</span></div>
      </div>

      <div class="footer">
        <span>Next: upgrade to stroke-level hit-testing (SVG paths)</span>
        <span>v0.2</span>
      </div>
    </aside>
  </div>

  <script>
    const svg = document.getElementById("svg");
    const pos = document.getElementById("pos");

    const hl = {
      bu: document.getElementById("hl-bu"),
      kou: document.getElementById("hl-kou"),
      ge: document.getElementById("hl-ge"),
    };

    const partChar = document.getElementById("partChar");
    const partMeta = document.getElementById("partMeta");
    const partDesc = document.getElementById("partDesc");
    const partName = document.getElementById("partName");
    const partHint = document.getElementById("partHint");

    // English UI; Chinese only for the character/components themselves.
    const DATA = {
      bu: {
        name: "Left-top component: 卜 (⺊)",
        char: "卜",
        meta: "Component (within 占)",
        desc:
          "卜 (⺊) is a component often associated with divination or indication in historical forms. " +
          "In this character family, it appears as the upper part of 占. " +
          "Here we use it to represent the left-top structure of 战.",
        hint: "You are pointing at the left-top area."
      },
      kou: {
        name: "Left-bottom component: 口",
        char: "口",
        meta: "Component (within 占)",
        desc:
          "口 commonly relates to the mouth, speech, or a ‘mouth-shaped’ enclosure. " +
          "In 占 it forms the lower part. " +
          "Here we use it to represent the left-bottom structure of 战.",
        hint: "You are pointing at the left-bottom area."
      },
      ge: {
        name: "Right component: 戈",
        char: "戈",
        meta: "Radical / weapon component",
        desc:
          "戈 is a historical weapon component and often signals meanings connected to conflict, force, or warfare. " +
          "In 战, the right side is built from 戈, making it a key semantic clue.",
        hint: "You are pointing at the right-side area."
      },
      whole: {
        name: "Whole character: 战",
        char: "战",
        meta: "Meaning & structure (overview)",
        desc:
          "战 is related to battle / war. Structurally it can be read as left 占 (⺊ + 口) plus right 戈. " +
          "This prototype uses coarse hover zones to help you ‘see’ components first—before moving to stroke-accurate mapping.",
        hint: "Hover different areas to explore components."
      }
    };

    function clearHL(){
      Object.values(hl).forEach(el => el.classList.remove("on"));
    }

    function setInfo(key){
      const d = DATA[key] || DATA.whole;
      partChar.textContent = d.char;
      partMeta.textContent = d.meta;
      partDesc.textContent = d.desc;
      partName.textContent = d.name;
      partHint.textContent = d.hint;
    }

    function getSvgPercent(evt){
      const rect = svg.getBoundingClientRect();
      const x = (evt.clientX - rect.left) / rect.width;
      const y = (evt.clientY - rect.top) / rect.height;
      return { x: Math.min(Math.max(x, 0), 1), y: Math.min(Math.max(y, 0), 1) };
    }

    function regionFromPercent(p){
      // Coarse regions (tweakable thresholds)
      if (p.x < 0.47){
        return (p.y < 0.52) ? "bu" : "kou";
      }
      return "ge";
    }

    let lastRegion = null;

    svg.addEventListener("pointermove", (evt) => {
      const p = getSvgPercent(evt);
      const xp = Math.round(p.x * 100);
      const yp = Math.round(p.y * 100);
      pos.textContent = `x: ${xp}% · y: ${yp}%`;

      // Only react when cursor is roughly over the character area
      const insideGlyph = (p.x > 0.20 && p.x < 0.82 && p.y > 0.18 && p.y < 0.88);

      if (!insideGlyph){
        if (lastRegion !== "whole"){
          clearHL();
          setInfo("whole");
          lastRegion = "whole";
        }
        return;
      }

      const r = regionFromPercent(p);
      if (r === lastRegion) return;

      clearHL();
      hl[r].classList.add("on");
      setInfo(r);
      lastRegion = r;
    });

    svg.addEventListener("pointerleave", () => {
      clearHL();
      setInfo("whole");
      lastRegion = "whole";
      pos.textContent = `x: --% · y: --%`;
    });

    setInfo("whole");
  </script>
</body>
</html>